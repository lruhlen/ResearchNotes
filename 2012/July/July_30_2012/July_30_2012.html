<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.3  (Unix)">
	<META NAME="AUTHOR" CONTENT="Laurel Ruhlen">
	<META NAME="CREATED" CONTENT="20120323;1231700">
	<META NAME="CHANGEDBY" CONTENT="Laurel Ruhlen">
	<META NAME="CHANGED" CONTENT="20120731;311900">
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>Date
&amp; Time: July 30, 2012</B></FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>Location:
home</B></FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>Computing
context: MachoMac </B></FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>(/Desktop/Research/CppHenyeyCode/src,
/Desktop/Research/BodenheimerCode/UnalteredCode)</B></FONT></FONT></FONT></P>
<HR>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=3><U><B>From
last time:</B></U></FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<FONT FACE="Times New Roman, serif"><FONT SIZE=3>I loaded the
InverseS and G matrices FROM PETER'S CODE (at j=0) into my C++
program, multiplied them together in the C++ program and examined the
results. They should agree with the A vector values from Peter's
code, but they very much don't... </FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<FONT FACE="Times New Roman, serif"><FONT SIZE=3>...This means I've
misunderstood the details of Peter's GIRL subroutine. (Ugh. That
means more wading through cryptic Fortran code.)</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<FONT FACE="Times New Roman, serif"><FONT SIZE=3>It looks like maybe
this is related to the way I'm reading in the E array (generated by
Peter's code) into my own code? Maybe??</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT FACE="Times New Roman, serif"><FONT SIZE=3><U><B>To do today:</B></U></FONT></FONT></P>
<OL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	Open up cdeg_debug.f in aquamacs</P>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	<STRIKE>Get it to print out the HA and D matrices before and after
	calling GIRL at j=0 and at j=1</STRIKE></P>
	<OL TYPE=a>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		<STRIKE>And maybe also the HC, HD, HE, and G matrices at those
		points, too?</STRIKE></P>
	</OL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; text-decoration: none">
	Actually, I already have that info for j=0/1 (but not j=1/2) stored
	in /BodenheimerCode/UnalteredCode/temp</P>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	Figure out how to get the A and B matrix values that Peter's code
	gets based upon those available matrices.</P>
	<OL TYPE=a>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		Probably will have to use python for this.</P>
	</OL>
</OL>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
Solution:</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
I think I misunderstood (or at least, didn't print out/index
correctly) which data structures were storing the A and B matrices. 
In addition, I think I misinterpreted the details of Peter's cookbook
about how to calculate the A &amp; B matrices.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
In Peter's code, Dpost = [B | A].</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
B = -1.0 * HE * InverseS = -1.0 * InverseS.transpose * HE.transpose</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
A = -1.0 * G * InverseS = -1.0 * InverseS.transpose * G.transpose</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
Note: the relations above are only true for the innermost mass cell,
j=0/1.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
I've gotten my indices mixed up somewhere on the CDEG calculations,
or on the AB calculations.  Need to figure out where, and then fix it
in my code.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
Turns out I was mixing up the row/column indices in assigning values
to the CDE matrices.  Also had in index mix-up in the ReadInArray
subroutine, with the 3D arrays.  Both of these are now fixed (I
hope...).</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
Awesome! Now, Helena and Peter's code producing very similar
correction values when I read in Peter's CDEG values to Helena.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
The next step is to see if they end up producing similar correction
values when Helena calculates the CDEG values itself.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
To do this, I'll need to use a different test case than the n=3/2
1Msun test case I've been using to debug so far, because Helena's
(kludged) EOS tables don't cover that parameter range:</P>
<OL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	<STRIKE>Switch Helena back to using the 10Mjup test case.</STRIKE><SPAN STYLE="text-decoration: none">
	 Done.</SPAN></P>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	<STRIKE>Get the cdeg_debug.start file to use the 10Mjup test case
	inputs.</STRIKE> <SPAN STYLE="text-decoration: none"> Done. </SPAN>
	</P>
	<OL TYPE=a>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		<STRIKE>Remind myself what the 10Mjup test case input file is
		named, again...</STRIKE></P>
		<OL TYPE=i>
			<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
			Made a new start file for this:
			/UnalteredCode/inputs/10MjupCDEGdebug.start</P>
		</OL>
	</OL>
</OL>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<OL START=5>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	<STRIKE>Make sure to git-commit and push the changes to cdeg_debug.f
	and Helena to the server.</STRIKE><SPAN STYLE="text-decoration: none">
	 Done.</SPAN></P>
</OL>
</BODY>
</HTML>