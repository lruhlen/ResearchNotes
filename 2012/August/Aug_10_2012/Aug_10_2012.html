<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.3  (Unix)">
	<META NAME="AUTHOR" CONTENT="Laurel Ruhlen">
	<META NAME="CREATED" CONTENT="20120323;1231700">
	<META NAME="CHANGEDBY" CONTENT="Laurel Ruhlen">
	<META NAME="CHANGED" CONTENT="20120810;15482200">
	<STYLE TYPE="text/css">
	<!--
		@page { size: landscape }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>Date
&amp; Time: Aug. 10, 2012</B></FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>Location:
home</B></FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>Computing
context: MachoMac </B></FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>(/Desktop/Research/CppHenyeyCode/src,
/Desktop/Research/BodenheimerCode/UnalteredCode)</B></FONT></FONT></FONT></P>
<HR>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=3><U><B>From
last time:</B></U></FONT></FONT></FONT></P>
<UL>
	<UL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		 Something is off in the way the corrections seem to be applied...
		Comparison between Peter's code and Helena:</P>
	</UL>
</UL>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<SPAN ID="Frame3" DIR="LTR" STYLE="float: left; width: 6.92in; height: 3.24in; border: none; padding: 0in; background: #ffffff">
	<P ALIGN=CENTER STYLE="margin-top: 0.08in; margin-bottom: 0.08in; font-style: normal">
	<IMG SRC="../Aug_6_2012/Figure3.jpg" NAME="graphics3" ALIGN=LEFT WIDTH=100% BORDER=0><BR CLEAR=LEFT><FONT SIZE=3><B>Figure
	1:</B></FONT></P>
	<P ALIGN=CENTER STYLE="margin-top: 0.08in; margin-bottom: 0.08in; font-style: normal">
	<FONT SIZE=3>Comparison of the dX/X values calculated in Helena vs.
	Peter's code in the first convergence loop for the same 10Mjup
	no-fusion input model.</FONT></P>
</SPAN><BR CLEAR=LEFT><BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
The starting dX/X profiles are different between the models, even
before rescaling the corrections, so the differences aren't due to
the different rescaling thresholds specified in the two codes. Need
to compare the dX values between Peter's code and Helena for this
10Mjup model. 
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<UL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	Python script/command set to compare the X, dX, and dX/X values
	(both raw and rescaled) between Peter's results and Helena's:
	/BodenheimerCode/plot_parse_utils/compare_codes_corrections.py</P>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	Note: Helena can't converge the n=3/2 1Msun input model <B>(See
	figure 2 below for comparison of Peter's and Helena's results.)</B></P>
	<UL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		The corrections calculated in the figures below are based on the
		exact same CDEG and M/P/r/L/T values, which were generated by
		Peter's code for an n=3/2 1Msun input model with NO fusion. The
		fact that the two programs calculate such wildly different
		correction values indicates that:</P>
		<UL>
			<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
			Either my Henyey matrix inversion/solution method isn't working as
			well as I'd thought</P>
			<UL>
				<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
				in which case, switch Helena back to using the old gauss-jordan
				matrix inversion method for the 4x4 matrix inversions, and see if
				the two codes still disagree this much</P>
			</UL>
			<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
			Or, the slight discrepancies in lookup table values/process
			between Helena and Peter's code really are significant, and I need
			to dig into that hardcore.</P>
			<UL>
				<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
				Note: the Helena run that produced these results used lookup
				tables generated from Peter's code to calculate the secondary
				variable values (though I'm not sure table lookups ever get
				called during the modifiedHenyeyMatrixInversion subroutine. Check
				on that first thing tomorrow). If this is the issue, it's that
				same old problem of something about the precision of these
				kludged-together lookup tables not being high enough for Helena
				to interpolate accurately within them.</P>
			</UL>
		</UL>
	</UL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	Other debugging avenues to keep in mind tomorrow:</P>
	<UL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		Maybe I should try comparing input models that both codes (should)
		converge without fusion. Find one of the 1Msun, no-fusion,
		converged models?</P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		Or, maybe I should try feeding both of them a really simple toy
		model (linear M/r/T/L/P relations, for example), and see how they
		differ in calculating the corrections to said model</P>
	</UL>
</UL>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<SPAN ID="Frame1" DIR="LTR" STYLE="float: left; width: 8.78in; height: 6.59in; border: none; padding: 0in; background: #ffffff">
	<P ALIGN=CENTER STYLE="margin-top: 0.08in; margin-bottom: 0.08in; font-style: normal">
	<IMG SRC="Figure2.jpg" NAME="graphics1" ALIGN=LEFT WIDTH=100% BORDER=0><BR CLEAR=LEFT><FONT SIZE=3><B>Figure
	2</B></FONT></P>
</SPAN><BR CLEAR=LEFT><BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<U><B>To Do Today:</B></U></P>
<UL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-weight: normal">
	<FONT COLOR="#000000"><STRIKE><FONT SIZE=3><SPAN STYLE="text-decoration: none">Switch
	Helena's Henyey solution subroutine back to using the gauss-jordan
	elimination method for matrix inversion (instead of the recently
	installed 4x4 algorithm) and see if that gets the n=2/3 polytrope
	1Msun model corrections to agree with those calculated by Peter's
	code.</SPAN></FONT></STRIKE><SPAN STYLE="text-decoration: none"><FONT SIZE=3>
	 Done.  Gives the exact same correction values that using the
	Cramer's rule inversion algorithm produces.  So, changing the
	specific inversion algorithm isn't the solution.  </FONT></SPAN></FONT>
	</P>
	<UL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-weight: normal">
		<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT SIZE=3>Correction
		values from this run with the gauss-jordan elimination inversion
		method are stored in
		CppHenyeyCode/misc_debugging_records/corrections_from_matrixInvert.txt</FONT></SPAN></FONT></P>
	</UL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-weight: normal">
	<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT SIZE=3>If
	not, print out the &quot;inverse S&quot; matrices from Peter's code,
	use them in Helena's algorithm, and see if that produces results
	that agree (i.e., are the discrepancies caused by differences in the
	codes' matrix inversion results/precision?)</FONT></SPAN></FONT></P>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-weight: normal">
	<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT SIZE=3>Also,
	test both Helena's matrix inversion algorithms (MIAs) on matrices
	with varying dynamic ranges, to see where they start to break down.</FONT></SPAN></FONT></P>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-weight: normal">
	<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT SIZE=3>See
	if Peter's [S | x] --&gt; [S | S^-1 * x] method (which I'm 80% but
	not 100% sure is what that GIRL subroutine of his is doing) truly is
	more numerically stable with these ill-conditioned-ish matrices.</FONT></SPAN></FONT></P>
	<UL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-weight: normal">
		<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT SIZE=3>If
		so, implement it in my code.  Or perhaps, test its robustness by
		implementing it in my code and seeing if that'll make Helena and
		Peter's code produce the same correction values.</FONT></SPAN></FONT></P>
	</UL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-weight: normal">
	<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT SIZE=3>Note:
	modifiedHenyeyMatrixSoln subroutine (in Helena) does NOT call any
	lookup tables, so the lookup table precision problem ISN'T what's
	causing the codes to calculate different correction values.</FONT></SPAN></FONT></P>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-weight: normal">
	<FONT COLOR="#000000"><SPAN STYLE="text-decoration: none"><FONT SIZE=3>Hints
	from Greg: Numerical recipes, ill-conditioned matrices (NR
	apparently has info on how to finess those), &quot;pre-conditioning&quot;
	a matrix, singular value decomposition?? (may only be worth it for
	matrices larger than 4x4, but worth keeping in mind)</FONT></SPAN></FONT></P>
</UL>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
</BODY>
</HTML>