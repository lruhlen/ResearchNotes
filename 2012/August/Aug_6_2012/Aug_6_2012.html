<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.3  (Unix)">
	<META NAME="AUTHOR" CONTENT="Laurel Ruhlen">
	<META NAME="CREATED" CONTENT="20120323;1231700">
	<META NAME="CHANGEDBY" CONTENT="Laurel Ruhlen">
	<META NAME="CHANGED" CONTENT="20120807;5511700">
	<STYLE TYPE="text/css">
	<!--
		@page { size: landscape }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>Date
&amp; Time: Aug. 6, 2012</B></FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>Location:
home</B></FONT></FONT></FONT></P>
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>Computing
context: MachoMac </B></FONT></FONT></FONT>
</P>
<P STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=2><B>(/Desktop/Research/CppHenyeyCode/src,
/Desktop/Research/BodenheimerCode/UnalteredCode)</B></FONT></FONT></FONT></P>
<HR>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in; font-style: normal; text-decoration: none">
<FONT COLOR="#000000"><FONT FACE="Times New Roman, serif"><FONT SIZE=3><U><B>From
last time:</B></U></FONT></FONT></FONT></P>
<UL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	<FONT SIZE=2>Let's see what happens when I let Helena run for a few
	consecutive convergence runs now:</FONT></P>
	<UL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		<FONT SIZE=2>Still doesn't converge, but doesn't crash.</FONT></P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		<FONT SIZE=2>max(dX/X) values swing around wildly. I'd like to plot
		those as a function of convergence loop number. See if any pattern
		emerges there</FONT></P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		<FONT SIZE=2>These swings indicate that the Henyey convergence
		process itself is unstable</FONT></P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		<FONT SIZE=2>Check if Peter's code is rescaling the variable
		corrections in the same way Helena is.</FONT></P>
		<UL>
			<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
			<FONT SIZE=2>It looks like my correction rescaling approach
			differs from his in an important way, as illustrated below.</FONT></P>
		</UL>
	</UL>
</UL>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<SPAN ID="Frame2" DIR="LTR" STYLE="float: left; width: 76%; height: 255%; border: none; padding: 0in; background: #ffffff">
	<P ALIGN=CENTER STYLE="margin-top: 0.08in; margin-bottom: 0.08in; font-style: normal">
	<IMG SRC="../Aug_5_2012/Figure1.jpg" NAME="graphics1" ALIGN=LEFT WIDTH=100% BORDER=0><BR CLEAR=LEFT><FONT SIZE=3><B>Figure
	1:</B> </FONT>
	</P>
	<P STYLE="margin-top: 0.08in; margin-bottom: 0.08in; font-style: normal">
	<FONT SIZE=3>Methods of rescaling corrections. Helena's method is on
	the left. Peter's code's method is on the right. Helena multiplies
	all the corrections by the same rescaling factor, such that the
	maximum dX/X value is reduced below the threshold. In other words,
	all the corrections are scaled homologously, and the same rescaling
	factor is applied to all four variables' corrections. Peter's code,
	on the other hand, doesn't rescale the corrections homologously.
	Rather, his code applies a 'ceiling' to the corrections. Different
	variables can have different dX/X ceilings in his code.</FONT></P>
</SPAN><BR CLEAR=LEFT><BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<SPAN STYLE="text-decoration: none"><FONT FACE="Times New Roman, serif"><FONT SIZE=3><SPAN STYLE="font-style: normal"><U><B>To
do today:</B></U></SPAN></FONT></FONT></SPAN></P>
<UL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	Make sure that Peter's code is rescaling the corrections as
	illustrated in Figure 1 (above):</P>
	<UL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		Modify cdeg_debug.f to print out the raw (un-rescaled) corrections
		and variable values at each mass cell.</P>
		<UL>
			<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
			Results stored in:
			BodenheimerCode/UnalteredCode/outputs/10Mjup_unrescaled_corrections.txt
						</P>
			<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
			Plot the dX/X value for each variable vs. mass cell #, using
			Python</P>
			<UL>
				<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
				Using /BodenheimerCode/parse_plot_utils/plot_dX_over_X.py script
				to make these plots.</P>
			</UL>
		</UL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		Uncomment the parts of cdeg_debug.f that rescale the corrections</P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		Run cdeg_debug with inputs/cdeg_debug.start, and capture all of the
		correction and original values for all 4 dependent variables</P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		In python, plot all dX/X values</P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		On the same plot(s), overlay the SMAX value for each variable as a
		line. (The SMAX values are specified in the .start file, and are
		what set the 'upper threshold' for dX/X and correction values in
		Peter's code.)</P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		If I see 'ceiling'-like behavior in the plots of Peter's code's
		corrections, then I'll know I've understood his rescaling process
		correctly.</P>
	</UL>
</UL>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
Results of this process: that's exactly what Peter's code is doing. 
See Figure 2 for proof!</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<SPAN ID="Frame1" DIR="LTR" STYLE="float: left; width: 9.11in; height: 5.71in; border: none; padding: 0in; background: #ffffff">
	<P ALIGN=CENTER STYLE="margin-top: 0.08in; margin-bottom: 0.08in; font-style: normal">
	<IMG SRC="Figure2.jpg" NAME="graphics2" ALIGN=LEFT WIDTH=100% BORDER=0><BR CLEAR=LEFT><FONT SIZE=3><B>Figure
	2:</B> </FONT>
	</P>
	<P STYLE="margin-top: 0.08in; margin-bottom: 0.08in; font-style: normal">
	<FONT SIZE=3>The raw and rescaled dX/X (correction) values from
	Peter's code.  Input file: cdeg.start (n=3/2 1Msun input model). 
	Output file:
	BodenheimerCode/UnalteredCode/outputs/n32_all_corrections.txt. 
	Produced by running cdeg_debug.f.  Data parsed and plotted using
	BodenheimerCode/plot_parse_utils/plot_dX_over_X.py.</FONT></P>
	<P STYLE="margin-top: 0.08in; margin-bottom: 0.08in; font-style: normal">
	<FONT SIZE=3>From this plot, it's clear that Peter's code applies a
	'ceiling' to the size of the corrections applied at each mass cell. 
	His code does NOT scale the corrections homologously, as Helena has
	been.  </FONT>
	</P>
</SPAN><BR CLEAR=LEFT><BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<UL>
	<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
	Change Helena to rescale corrections in the same way.</P>
	<UL>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		See if that change lets Helena converge the 10Mjup model.</P>
		<LI><P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
		Not quite yet.  Something is off in the way the corrections seem to
		be applied...  Comparison between Peter's code and Helena:</P>
	</UL>
</UL>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<SPAN ID="Frame3" DIR="LTR" STYLE="float: left; width: 12.21in; height: 4.58in; border: none; padding: 0in; background: #ffffff">
	<P ALIGN=CENTER STYLE="margin-top: 0.08in; margin-bottom: 0.08in; font-style: normal">
	<IMG SRC="Figure3.jpg" NAME="graphics3" ALIGN=LEFT WIDTH=100% BORDER=0><BR CLEAR=LEFT><FONT SIZE=3><B>Figure
	3:</B></FONT></P>
	<P ALIGN=CENTER STYLE="margin-top: 0.08in; margin-bottom: 0.08in; font-style: normal">
	 <FONT SIZE=3>Comparison of the dX/X values calculated in Helena vs.
	Peter's code in the first convergence loop for the same 10Mjup
	no-fusion input model.</FONT></P>
</SPAN><BR CLEAR=LEFT><BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
The starting dX/X profiles are different between the models, even
before rescaling the corrections, so the differences aren't due to
the different rescaling thresholds specified in the two codes.  Need
to compare the dX values between Peter's code and Helena for this
10Mjup model.  
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
Need to write myself a python script to directly compare the X and dX
and rescaling values between the two cases.</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-bottom: 0.08in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
</BODY>
</HTML>