<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.3  (Unix)">
	<META NAME="AUTHOR" CONTENT="Laurel Ruhlen">
	<META NAME="CREATED" CONTENT="20120323;1231700">
	<META NAME="CHANGEDBY" CONTENT="Laurel Ruhlen">
	<META NAME="CHANGED" CONTENT="20121213;21014400">
	<META NAME="CHANGEDBY" CONTENT="Laurel Ruhlen">
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal">
<FONT COLOR="#000000"><FONT FACE="Courier, monospace"><FONT SIZE=2><B>Date
&amp; Time: Dec. 12, 2012</B></FONT></FONT></FONT></P>
<P STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal">
<FONT COLOR="#000000"><FONT FACE="Courier, monospace"><FONT SIZE=2><B>Location:
Campus</B></FONT></FONT></FONT></P>
<P STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal">
<FONT COLOR="#000000"><FONT FACE="Courier, monospace"><FONT SIZE=2><B>Computing
context: /Desktop/Research/CppHenyeyCode,
/Desktop/Research/BodenheimerCode/UnalteredCode/ </B></FONT></FONT></FONT>
</P>
<HR>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal">
<FONT COLOR="#000000"><FONT FACE="Courier, monospace"><FONT SIZE=2><U><B>From
last time:</B></U></FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2>Figure out why the dX
profiles agree when dTime = 0, but not when dTime &gt; 0. </FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2>Ways of doing this:</FONT></FONT></P>
<OL>
	<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
	<FONT FACE="Courier, monospace"><FONT SIZE=2>See which discrepancies
	arise when I run both codes with dTime \approx 1e7 seconds (rather
	than 1e9 seconds)</FONT></FONT></P>
	<OL>
		<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
		<FONT FACE="Courier, monospace"><FONT SIZE=2>See how the
		discrepancies grow with/depend on dTime.</FONT></FONT></P>
	</OL>
</OL>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2><I>Result: See Figure 2
below.</I></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<OL>
	<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
	<FONT FACE="Courier, monospace"><FONT SIZE=2>Compare how Helena and
	Peter's code are handling the P_old and T_old values (I suspect this
	is the main thing that's causing the differences) </FONT></FONT>
	</P>
</OL>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2><I>Result: I added a set
vars.old = vars.now in Helena for that initial time-step pass, and it
didn't improve or change the resulting dX profiles at all.</I></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2><I>Also looked into how
Peter's code handles the CDE calculations for non-zero dTime values,
and am still not entirely clear on how his approach (analytic calcs
of the derivatives) should carry over to Helena's (numerical
calculation of the derivs).</I></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<OL START=3>
	<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
	<FONT FACE="Courier, monospace"><FONT SIZE=2>Check that Helena is
	handling the 1/dTime calculation stuff correctly in the G3J
	subroutine.</FONT></FONT></P>
</OL>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2><I>Result: it looks like
that's working fine. Also, the dL amplitude increases w/ decreasing
dTime provide evidence in favor of that working right. (I think.)</I></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2>Based on the 3 results
above, I think the issue lies in calculating the CDE derivs involving
G3J with respect to P and T. </FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2>Switched over to pen &amp;
paper at this point. See scans of the notes below.</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<IMG SRC="../Dec_12_2012/Handwritten_Notes/notes4.png" NAME="graphics1" ALIGN=LEFT WIDTH=366 HEIGHT=486 BORDER=0><BR CLEAR=LEFT><BR><BR>
</P>
<HR>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2><U><B>Today's work:</B></U></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2>See how Peter's code
handles the G3J calculations at the outer boundary.</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2>The chunk of Peter's
code that changes the quantity [L(jMax) - L(jMax-1)] happens just
before the main program first calls the Henyey subroutine, and looks
like this:</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT COLOR="#800000"><FONT FACE="Courier, monospace"><FONT SIZE=2>c 
      call massflux(TIME,Zflux)</FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT COLOR="#800000"><FONT FACE="Courier, monospace"><FONT SIZE=2>c 
      if(konv.gt.0. or. MODEL.eq.1) then</FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT COLOR="#800000"><FONT FACE="Courier, monospace"><FONT SIZE=2>c 
        mode=999</FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT COLOR="#800000"><FONT FACE="Courier, monospace"><FONT SIZE=2>c 
      else</FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT COLOR="#800000"><FONT FACE="Courier, monospace"><FONT SIZE=2>c 
        mode=0</FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT COLOR="#800000"><FONT FACE="Courier, monospace"><FONT SIZE=2>c 
        call gridmov</FONT></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT COLOR="#800000"><FONT FACE="Courier, monospace"><FONT SIZE=2>c 
      endif </FONT></FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2>So it's either the
massflux of the gridmov subroutines that cause this change.  Let's
find out which it is...</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2>It's the gridmov
subroutine that's causing the change.  Makes sense, b/c its job is to
de/refine the mass cell size/structure to optimize the Henyey
process.  </FONT></FONT>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<FONT FACE="Courier, monospace"><FONT SIZE=2>There are two ways to
debug this, and I'll try both next time:</FONT></FONT></P>
<OL>
	<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
	<FONT FACE="Courier, monospace"><FONT SIZE=2>Run Peter's code
	WITHOUT the pre-Henyey call to gridmov, and see how the CDEG and dX
	values it generates compare to Helena's results.</FONT></FONT></P>
	<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
	<FONT FACE="Courier, monospace"><FONT SIZE=2>Make the starting model
	for Helena the 'refined' model that Peter's code uses after passing
	it through gridmov.</FONT></FONT></P>
</OL>
</BODY>
</HTML>