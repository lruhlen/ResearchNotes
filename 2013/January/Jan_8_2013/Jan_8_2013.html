<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>Lab Notebook Entry</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.3  (Unix)">
	<META NAME="AUTHOR" CONTENT="Laurel Ruhlen">
	<META NAME="CREATED" CONTENT="20130107;19035500">
	<META NAME="CHANGEDBY" CONTENT="Laurel Ruhlen">
	<META NAME="CHANGED" CONTENT="20130108;23522000">
	<META NAME="Info 1" CONTENT="">
	<META NAME="Info 2" CONTENT="">
	<META NAME="Info 3" CONTENT="">
	<META NAME="Info 4" CONTENT="">
	<STYLE TYPE="text/css">
	<!--
		@page { margin-left: 0.79in; margin-right: 0.79in; margin-top: 0.6in; margin-bottom: 0.56in }
		P { margin-bottom: 0.08in }
		A:link { so-language: zxx }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal">
<FONT FACE="Courier, monospace"><FONT SIZE=2><B>Date &amp; Time: </B><SPAN STYLE="font-weight: normal">Jan.
8, 2013</SPAN></FONT></FONT></P>
<P STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal">
<FONT FACE="Courier, monospace"><FONT SIZE=2><B>Location: </B><SPAN STYLE="font-weight: normal">Campus</SPAN></FONT></FONT></P>
<P STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal">
<FONT FACE="Courier, monospace"><FONT SIZE=2><B>Computing context:
</B><SPAN STYLE="font-weight: normal">Macho Mac</SPAN></FONT></FONT></P>
<HR>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal">
<FONT FACE="Courier, monospace"><FONT SIZE=2><U><B>Continuing from
last time:</B></U></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal">
<BR><BR>
</P>
<OL>
	<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
	<FONT FACE="Courier, monospace"><FONT SIZE=2>Figure out where I left
	off last time</FONT></FONT></P>
	<OL TYPE=a>
		<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
		<FONT FACE="Courier, monospace"><FONT SIZE=2>The dX profiles
		calculated by Peter's code changed by a factor of ~2.6 between two
		runs, and I couldn't figure out why (see Figure 1). </FONT></FONT>
		</P>
		<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
		<IMG SRC="Jan_8_2013_html_m2c132b59.gif" NAME="Frame1" ALT="Frame1" ALIGN=BOTTOM></P>
		<OL TYPE=i>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			<FONT FACE="Courier, monospace"><FONT SIZE=2>This was an issue,
			because I though I'd gotten Helena to produce dX profiles that
			agreed w/ his code (after fixing the outermost boundary condition
			discrepancies b/w the codes)</FONT></FONT></P>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			<FONT FACE="Courier, monospace"><FONT SIZE=2>I need to be able to
			do a full run-to-convergence of a 10 Mjup model in both codes as
			the next step, and suddenly his code's behavior seems to have
			changed.  So, can't verify if Helena's now working correctly until
			I fix whatever's now wrong w/ Peter's code</FONT></FONT></P>
		</OL>
	</OL>
	<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
	<FONT FACE="Courier, monospace"><FONT SIZE=2>And then start up again
	from there!</FONT></FONT></P>
	<OL TYPE=a>
		<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
		<FONT FACE="Courier, monospace"><FONT SIZE=2>I think my next step,
		at the time I stopped, was to go onto GitHub and compare the
		versions of Peter's code that I had archived there to track down
		the change responsible for the error.</FONT></FONT></P>
	</OL>
	<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
	<FONT FACE="Courier, monospace"><FONT SIZE=2>Today, I spent most of
	my time figuring out how to set up an OpenOffice document template
	that would:</FONT></FONT></P>
	<OL TYPE=a>
		<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
		 <FONT FACE="Courier, monospace"><FONT SIZE=2>keep lists, outlines,
		and captions in Courier 10pt, and </FONT></FONT>
		</P>
		<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
		<FONT FACE="Courier, monospace"><FONT SIZE=2>that would also format
		graphics such that they'd show up correctly in the exported html
		files.  </FONT></FONT>
		</P>
		<OL TYPE=i>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
			<FONT FACE="Courier, monospace"><FONT SIZE=2>Can't figure out how
			to set this in a template, but can do it manually by setting the
			anchors on both the frame and the picture to &quot;Anchor as
			character.&quot;</FONT></FONT></P>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
			<FONT FACE="Courier, monospace"><FONT SIZE=2>Spent lots of time
			trying to figure out how to set up a macro to automate the
			process, with no luck.</FONT></FONT></P>
		</OL>
	</OL>
</OL>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<BR><BR>
</P>
<HR>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal">
<FONT FACE="Courier, monospace"><FONT SIZE=2><U><B>Today's Work:</B></U></FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<BR><BR>
</P>
<OL>
	<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
	Which version of the Fortran code did I use to create the
	10MjNF_corrections.txt values?</P>
	<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
	What input file/values did I use to create the
	10MjNF_corrections.txt values?</P>
	<OL TYPE=a>
		<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
		</P>
	</OL>
	<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
	Which code version and input file did I use to create the
	temp_corr.txt values?</P>
	<OL TYPE=a>
		<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
		Did I use the dTime &gt; 0, or the dTime = 0 input for that?</P>
		<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
		To figure this out, running cdeg_debug2 with each of the following
		input files:</P>
		<OL TYPE=i>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			10MjNF.start	</P>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			10MjNF_nonzero_dTime.start	</P>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			atmosProbe.start</P>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			10MjNF_no_conv_nab.start</P>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			10MjupCDEGdebug.start</P>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			cdeg.start</P>
		</OL>
		<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
		Results stored in
		/Users/laurel/Desktop/Research/BodenheimerCode/UnalteredCode/outputs/10MjNF_debugging</P>
		<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
		Parse and plot all of these results in python, and see if/how they
		differ.  (If any of them give the old, &quot;right&quot; dX
		results.)</P>
		<OL TYPE=i>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			How did I parse these fortran output files before?  Surely not by
			hand??</P>
			<OL TYPE=A>
				<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
				This time, I extracted the corrections information with the
				following command:</P>
				<UL>
					<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
					grep corr: *.txt | sed  's/corr:/ /g' &gt; corrections.txt 
					</P>
					<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
					the 's/corr:/ /g' replaces 'corr:' with a space, effectively
					removing the string from those lines.</P>
				</UL>
			</OL>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			Did I have a python script in place to read these files in and
			plot them?</P>
			<OL TYPE=A>
				<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
				I do now.  It's called &quot;compare_several_Peter_dX_results.py&quot;.</P>
			</OL>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			Results: see Figure 2</P>
			<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			<IMG SRC="Jan_8_2013_html_m346ecad6.gif" NAME="Frame2" ALT="Frame2"></P>
			<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			</P>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			It looks like the outer boundary conds for P &amp; T, and the
			inner boundary conds for L and r remain the same in all the
			datasets plotted in Figure 2.  
			</P>
			<OL TYPE=A>
				<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
				I think this indicates that all the runs are reading in the same
				initial model, and that their atmos calculations are operating
				identically.</P>
				<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
				<STRIKE>So, I think it's something in the Henyey subroutine
				that's going haywire.</STRIKE></P>
				<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
				It might also be due to the fact that I commented out part of
				that nabla subroutine... Let's check that.</P>
				<UL>
					<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
					Yep, that's it.  See Figure 3.</P>
					<UL>
						<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
						<B>Figured out what was causing that ~2.6 factor difference. 
						You need the full convective gradient calculation operating in
						the nabla subroutine.  Don't comment it out if you want this
						thing to work.</B></P>
					</UL>
					<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
					<IMG SRC="Jan_8_2013_html_4ae22617.gif" NAME="Frame3" ALT="Frame3" ALIGN=BOTTOM></P>
				</UL>
			</OL>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			<STRIKE>Let's do a straight comparison b/w input files from
			10MjNF_first_iter_corrections.txt and 10MjNF...</STRIKE></P>
			<LI><P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
			<STRIKE>Wait, let's also try running those inputs thru cdeg_debug
			(instead of cdeg_debug2), and see what happens.</STRIKE></P>
		</OL>
	</OL>
</OL>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<FONT FACE="Courier, monospace"><FONT SIZE=2>Now that I've fixed the
fortran code, the next step is to compare the dX profiles it
calculates when dTime &gt; 0 to the ones Helena calculates for the
same non-zero dTime value.  Start with this tomorrow.</FONT></FONT></P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<BR><BR>
</P>
<P ALIGN=LEFT STYLE="margin-top: 0.02in; margin-bottom: 0.02in; background: #ffffff; border: none; padding: 0in; font-style: normal; font-weight: normal; text-decoration: none">
<BR><BR>
</P>
</BODY>
</HTML>